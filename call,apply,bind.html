<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Call(), Apply(), Bind()</title>
  </head>
  <body>
    <h1>Call(), Apply(), Bind()</h1>
  </body>

  <script>
    function ninja() {
      "use strict";
      let x = 6;
      console.log(this);
    }

    ninja(); // 1. invoke without reference (non strict mode)

    new ninja(); // 2. invoke using new keyword: return empty object same name of function name

    // 3. invoke using reference
    window.ninja();

    obj1 = { name: "nehal" };

    // 4. invoke using call() method
    ninja.call(); // strict mode: undefined

    ninja.call({}); // {}

    ninja.call(obj1); // {obj1: {name: "nehal"}}

    // -----------------------------Call method()----------------------------------------

    console.log("From Here....");

    function pokemon(a, b) {
      // this = window {..}
      console.log(this.message, a, b); // undefined
    }

    // pokemon(); // undefined: Property message is not exist in window{..} object

    // pokemon.call(); // undefined: Property message is not exist in window{..} object

    // // passed empty object as an argument: {...}
    // pokemon.call({}); // undefined: because empty object does not contain the property 'message'

    // pokemon.call({ x: 6 }); // undefined: because empty object does not contain the property 'message'

    // pokemon.call({ message: "Call() method" }); // Call() method

    const myObj = { x: 6, message: "Custom message" };

    // pokemon.call(myObj); // Custom message: pass the object for this context

    // Pass comma separated arguments
    pokemon.call(myObj, [1, 2], 2);

    pokemon.call({ message: "message 2" }, 33, 15);

    // -----------------------------Apply method---------------------------------------

    // Pass arguments in an Array

    function box(a, b) {
      console.log(this.message, a, b);
    }

    const django = { message: "Hey Django" };

    box.apply(django, [[1, 2], 60]);

    // -----------------------------Bind() method----------------------------------------

    // set the value of 'this' permenantly inside the function without touching the function
    // Returns a new function which can be invoked later whenever you want

    function noddy(a, b) {
      console.log(this.message, a, b);
    }
    const bindObj = { message: "hey from Bind()" };

    // do not invoke function now
    let invokeLater = noddy.bind(bindObj, 33, 15);
    // invokeLater();

    bindObj.message = "Message edits";
    bindObj.a = 600;

    // invoked later withour () moon bracket notation
    setTimeout(invokeLater, 2000);
  </script>
</html>
